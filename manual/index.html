<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | causal-net</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-pure-min.css"><link rel="stylesheet" href="./inject/css/0-causal-style.css"><script src="./inject/script/0-jquery-3.3.1.min.js"></script><script src="./inject/script/0-run_examples.js"></script></head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/introduction.html"><a href="manual/introduction.html#introduction" data-ice="link">Introduction</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#pipeline-package" data-ice="link">Pipeline package</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/introduction.html"><a href="manual/introduction.html#sub-packages" data-ice="link">Sub-packages</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#causal-net-core" data-ice="link">causal-net.core</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#causalnetcore" data-ice="link">causalNetCore</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#tensor" data-ice="link">Tensor</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#function" data-ice="link">Function</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#store" data-ice="link">Store</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#causal-net-representation" data-ice="link">causal-net.representation</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#causalnetembedding" data-ice="link">causalNetEmbedding</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#universalembedding" data-ice="link">universalEmbedding</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#representationmixins" data-ice="link">RepresentationMixins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#causal-net-sampling" data-ice="link">causal-net.sampling</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#causalnetsampling" data-ice="link">causalNetSampling</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#samplingmixins" data-ice="link">SamplingMixins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#causal-net-storage" data-ice="link">causal-net.storage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#indexdbstorage" data-ice="link">indexDBStorage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#storagemixins" data-ice="link">StorageMixins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#csvfilemixins" data-ice="link">CSVFileMixins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#pngfilemixins" data-ice="link">PNGFileMixins</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#textfilemixins" data-ice="link">TextFileMixins</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/introduction.html"><a href="manual/introduction.html#causal-net-utils" data-ice="link">causal-net.utils</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#platform" data-ice="link">platform</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#fetch" data-ice="link">fetch</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#png" data-ice="link">PNG</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#csv" data-ice="link">CSV</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#stream" data-ice="link">Stream</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/introduction.html"><a href="manual/introduction.html#assert" data-ice="link">assert</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-user-index" data-ice="manualUserIndex"><p><strong><em>This project is immature and under active development. Contents will be updated rapidly</em></strong></p>
<h1 id="portable-deep-learning-models-with-causality">Portable deep learning models with Causality</h1><p><img src="./manual/asset/coffee-main.jpg" alt="Photo on Unsplash"></p>
<p>Causality is a free and open source javascript library that allows building isomorphic machine learning pipeline. Roundly speaking, your trained model can be deployed on client&apos;s devices via web environment without re-piping your code. </p>
<p>On top of Tensorflowjs, our set of reusable components handle data preprocessing, infer data representation, visualizing, training and evaluation on both node and web environment with the same APIs. Thus reduce engineering efforts for making production AI services. By using the same language, developers can simplify development setup, mitigate the communication cost, better coding pattern and share more ideas. </p>
<p>Moreover, with AI models are loaded as client&apos; devices for performing inference, personal or sensitive data is not exposed to the service providers. We also invest in ensemble learning and the recent federated learning approach for distributed training while preserving data privacy without requiring any global data storage. </p>
<p>Researchers can utilize built-in datasets and the prebuilt pipelines to prototype new model ideas and make research results easy to review, present and reproduce. We hope developers and researchers can find this project a meaningful work to contribute and collaborate to push forward a new class of affordable, transparent deep learning services. </p>
<p>The commercial version of this library, Moderator, is our effort for moderating social network contents heading to protecting community culture. The AI moderator, which is built up by community voted training data, transparently prevent bad contents from propagating, and re-ranking relevant contents prior to client views without revealing any personal preference. The Causality, Moderator alongside with React Social Network are the ideas from our startup, Red Gold, for building a smarter social network with community culture respect and transparent AI moderator.</p>
</div>

  

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Sub-packages</h1><h2>causal-net.core</h2><p>This package provides:</p><h3>causalNetCore</h3><ul>
<li>Allow acess to core function and core tensor instance.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { causalNetCore } from &apos;causal-net.core&apos;;
console.log(causalNetCore.CoreTensor);
console.log(causalNetCore.CoreFunction);
</code>
</code></pre><p><a href="./manual/./asset/examples/core.babel.js">Run code</a></p><h3>Tensor</h3><ul>
<li>Primitive class for composing Tensor based class. This class is based on <a href="https://js.tensorflow.org/">tensorflowjs</a></li>
</ul><h3>Function</h3><ul>
<li>Primitive class for composing Function based class. This class is based on <a href="https://ramdajs.com/">Ramda</a></li>
</ul><h3>Store</h3><ul>
<li>Primivtive class for composing Store base class. This class is based on <a href="https://www.npmjs.com/package/levelup">levelup</a></li>
</ul><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-datasets/DESCRIPTION.md]</p><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-preprocessing/DESCRIPTION.md]</p><h2>causal-net.representation</h2><p>This module provide representation instances and representation mixins</p><h3>causalNetEmbedding</h3><ul>
<li>Provide methods for transforming tokens or representing sentence into single vector.</li>
</ul><p>Node</p><pre><code class="lang-javascript"><code class="source-code prettyprint">import { causalNetEmbedding } from &apos;causal-net.representation&apos;;
import { termLogger } from &apos;causal-net.log&apos;;
(async ()=&gt;{
    const configLink = &apos;../../datasets/WordVec_EN/&apos;;
    await causalNetEmbedding.connect(configLink, true);
    //first time transform will find on storage cache
    let vecs = await causalNetEmbedding.transform([&apos;this&apos;, &apos;is&apos;, &apos;test&apos;]);
    for(let vec of vecs){
        termLogger.log({ vec });
    }
    //second time transform will find on memory cache
    vecs = await causalNetEmbedding.transform([&apos;this&apos;, &apos;is&apos;, &apos;test&apos;]);
    for(let vec of vecs){
        termLogger.log({ vec });
    }
    //return the tensor representing sentence
    let sentVec = await causalNetEmbedding.sentenceEncode([ [&apos;this&apos;, &apos;is&apos;, &apos;test&apos;] ]);
    sentVec.print();
})().catch(err=&gt;{
    console.error(err);
});</code>
</code></pre><p><a href="./manual/./asset/examples/causalNetEmbedding.babel.node.js">Run code</a></p><h3>universalEmbedding</h3><ul>
<li>Provide methods for transforming tokens or representing sentence into single vector based <a href="https://github.com/tensorflow/tfjs-models/tree/master/universal-sentence-encoder">use</a></li>
</ul><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-representation/DESCRIPTION.md, /home/huynhnguyen/github/causality/packages/causality-representation/examples/universalembedding.babel.js]</p><h3>RepresentationMixins</h3><ul>
<li>Mixins for mix with Pipeline class or dataset class.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { RepresentationMixins, causalNetEmbedding } from &apos;causal-net.representation&apos;;
import { platform } from &apos;causal-net.utils&apos;;
import { Tensor } from &apos;causal-net.core&apos;;
const PipeLineConfigure = {
    Representation: {
        Embedding: causalNetEmbedding,
        EmbeddingConfig: &apos;../../datasets/WordVec_EN/&apos;,
    }
}
class SimplePipeline extends platform.mixWith(Tensor, [RepresentationMixins]){
    constructor(configure){
        super();
        this.setRepresentationByConfig(configure);
    }
}
let pipeline = new SimplePipeline(PipeLineConfigure);
pipeline.connect();
console.log(pipeline.Representation);</code>
</code></pre><p><a href="./manual/./asset/examples/embeddingMixins.babel.node.js">Run code</a></p><h2>causal-net.sampling</h2><p>This causal-net.sampling is a sub-module for <a href="https://red-gold.github.io/causality-docs/">causality</a> project.
This module provide sampling instance and sampling mixins</p><h3>causalNetSampling</h3><ul>
<li>Provide sampling instance with various sampling methods.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { causalNetSampling } from &apos;causal-net.sampling&apos;;
import {termLogger as Logger} from &apos;causal-net.log&apos;;
let numSamples = 4;
let idSize = 10;//id list: [0,1,2,3,4,5,6,7,8,9]
Logger.log(causalNetSampling.subSampling(numSamples, idSize));

numSamples = 4;
let positiveSampleId = [0, 1];
//ids: [0, 1, 2, 3];
let probIds = [0.9, 0.9, 0.3, 0.7];
let samples = causalNetSampling.negSampling(numSamples, positiveSampleId, probIds);
termLogger.log({ samples });</code>
</code></pre><p><a href="./manual/./asset/examples/causalNetSampling.babel.js">Run code</a></p><h3>SamplingMixins</h3><ul>
<li>Mixins Mixins for mix with Pipeline class or dataset class.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { SamplingMixins, causalNetSampling } from &apos;causal-net.sampling&apos;;
import { Platform } from &apos;causal-net.utils&apos;;
import { Tensor, Function } from &apos;causal-net.core&apos;;
console.log(causalNetSampling instanceof Function);
class SimplePipeline extends Platform.mixWith(Tensor, [SamplingMixins]){
    constructor(){
        super();
        this.Sampling = causalNetSampling;
    }
}
let pipeline = new SimplePipeline();
console.log(pipeline.Sampling);</code>
</code></pre><p><a href="./manual/./asset/examples/sampling.mixins.babel.js">Run code</a></p><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-models/DESCRIPTION.md]</p><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-layers/DESCRIPTION.md]</p><p>[EXAMPLE  ERROR! /home/huynhnguyen/github/causality/packages/causality-memcache/DESCRIPTION.md]</p><h2>causal-net.storage</h2><p>This module provides:</p><h3>indexDBStorage</h3><ul>
<li>The isomorphic high performance key-value storage based on indexDB.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { indexDBStorage } from &apos;causal-net.storage&apos;;
(async ()=&gt;{
    await indexDBStorage.writeFile(&apos;/temp&apos;,&apos;12345&apos;);
    let content  = await indexDBStorage.readFile(&apos;/temp&apos;);
    console.log({content});

    //get file list
    let listFiles = await indexDBStorage.getFileList(&apos;/&apos;);
    console.log({listFiles});

    //fetch png image and save pixel data into file
    const url = &apos;https://avatars3.githubusercontent.com/u/43268620?s=200&amp;v=4&apos;;
    await indexDBStorage.fetchPNGFile(url, &apos;icon&apos;);
    const pixelArray = await indexDBStorage.readPNGFile(&apos;icon&apos;);
    console.log({ pixelArray });

    let ops = [
        { type: &apos;put&apos;, key: &apos;temp&apos;, value: &apos;123445&apos; },
        { type: &apos;del&apos;, key: &apos;temp&apos; }];
    //batch does not support &apos;get&apos; type
    let batchResult = await indexDBStorage.batch(ops);
    console.log({batchResult});
})().catch(err=&gt;{
    console.error(err);
});
</code>
</code></pre><p><a href="./manual/./asset/examples/storage.babel.js">Run code</a></p><h3>StorageMixins</h3><ul>
<li>Mixins storage for mix with Pipeline class.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { StorageMixins, indexDBStorage } from &apos;causal-net.storage&apos;;
import { Platform } from &apos;causal-net.utils&apos;;
import { Tensor, Store } from &apos;causal-net.core&apos;;

class SimplePipeline extends Platform.mixWith(Tensor, [StorageMixins]){
    constructor(){
        super();
        this.Storage = indexDBStorage;
    }
}
let pipeline = new SimplePipeline();
console.log(pipeline.Storage instanceof Store);</code>
</code></pre><p><a href="./manual/./asset/examples/storage.mixins.babel.js">Run code</a></p><h3>CSVFileMixins</h3><ul>
<li>Mixins for read/write/fetch CSV file. </li>
</ul><h3>PNGFileMixins</h3><ul>
<li>Mixins for read/write/fetch PNG file.</li>
</ul><h3>TextFileMixins</h3><ul>
<li>Mixins for read/write/fetch Text file.</li>
</ul><h2>causal-net.utils</h2><p>This module provides:</p><h3>platform</h3><ul>
<li>Enhanced isomorphic mixins with corresponding platform (node|web).</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { assert } from &apos;causal-net.utils&apos;;
assert.seemMatchSample([2,2,3], [1,2,3], &apos;validate sample&apos;);
assert.seemMatchSample(&apos;sample text&apos;, &apos;pattern text&apos;, &apos;validate sample&apos;);
assert.seemMatchSample( { &apos;text&apos; : &apos;pattern text 1&apos;, &apos;number&apos; : 1123 }, 
                        { &apos;text&apos; : &apos;pattern text&apos;, &apos;number&apos; : 1123 } , &apos;validate sample&apos;);
try{
    assert.seemMatchSample([&apos;2&apos;,2,3], [1,2,3], &apos;validate sample&apos;);
}
catch(err){
    //error due to mismatch schema
    console.log(err.message);
};
class A{};
let a = new A();
assert.beInstanceOf(a, A);
try{
    assert.beInstanceOf(&apos;1&apos;, A);
}
catch(err){
    console.log(err.message);
}
</code>
</code></pre><p><a href="./manual/./asset/examples/assert.babel.js">Run code</a></p><h3>fetch</h3><ul>
<li>isomorphic fetch.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import {fetch, Stream, PNGUtils} from &apos;causal-net.utils&apos;;
(async ()=&gt;{
    let link = &apos;https://avatars3.githubusercontent.com/u/43268620?s=200&amp;v=4&apos;;
    let content = await fetch.fetchData(link);
    console.log({&apos;content length&apos;: content.length});
});

</code>
</code></pre><p><a href="./manual/./asset/examples/fetch.babel.js">Run code</a></p><h3>PNG</h3><ul>
<li>isomorphic PNG parser.</li>
</ul><p>Web/Node:</p><pre><code class="lang-javascript"><code class="source-code prettyprint">import { pngUtils } from &apos;causal-net.utils&apos;;
(async ()=&gt;{
    const link = &apos;https://avatars3.githubusercontent.com/u/43268620?s=200&amp;v=4&apos;;
    let fetchedData = await pngUtils.fetchPNG(link);
    console.log(fetchedData.length);
})();</code>
</code></pre><p><a href="./manual/./asset/examples/png.babel.js">Run code</a></p><p>Node:</p><pre><code class="lang-javascript"><code class="source-code prettyprint">import { pngUtils } from &apos;causal-net.utils&apos;;
(async ()=&gt;{
    let data = await pngUtils.readPNG(&apos;../../datasets/icon.png&apos;);
    console.log(data.length);
    pngUtils.writePNG(data, [200, 200, 4], &apos;./out.png&apos;);
})();
</code>
</code></pre><p><a href="./manual/./asset/examples/png.babel.node.js">Run code</a></p><h3>CSV</h3><ul>
<li>isomorphic CSV parser.</li>
</ul><p>Node:</p><pre><code class="lang-javascript"><code class="source-code prettyprint">import { csvUtils } from &apos;causal-net.utils&apos;;
(async ()=&gt;{
    let data = await csvUtils.readCSV(&apos;../../datasets/credict.csv&apos;);
    console.log(data);
})();
</code>
</code></pre><p><a href="./manual/./asset/examples/csv.babel.node.js">Run code</a></p><h3>Stream</h3><ul>
<li>isomorphic Stream with Readable, Writeable, Duplex.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { stream } from &apos;causal-net.utils&apos;;

let reader = stream.makeReadable();

const TranformFn = (chunkData, chunkEncoding, afterTransformFn) =&gt;{
    chunkData.x = (chunkData.x+1.5);
    let event = null;
    afterTransformFn(event, chunkData);
};
let transformer = stream.makeTransform(TranformFn);

const WriteFn = (chunkData, chunkEncoding, callback) =&gt;{
    console.log({chunkData});
    callback();
};
let writer = stream.makeWritable(WriteFn);

reader.pipe(transformer).pipe(writer);
//write random int for every 100 ms    
setInterval(() =&gt; {
    reader.push({ x: Math.random() });
}, 100);
</code>
</code></pre><p><a href="./manual/./asset/examples/stream.babel.js">Run code</a></p><h3>assert</h3><ul>
<li>Enhanced isomorphic assert with schema learnt from example.</li>
</ul><pre><code class="lang-javascript"><code class="source-code prettyprint">import { assert } from &apos;causal-net.utils&apos;;
assert.seemMatchSample([2,2,3], [1,2,3], &apos;validate sample&apos;);
assert.seemMatchSample(&apos;sample text&apos;, &apos;pattern text&apos;, &apos;validate sample&apos;);
assert.seemMatchSample( { &apos;text&apos; : &apos;pattern text 1&apos;, &apos;number&apos; : 1123 }, 
                        { &apos;text&apos; : &apos;pattern text&apos;, &apos;number&apos; : 1123 } , &apos;validate sample&apos;);
try{
    assert.seemMatchSample([&apos;2&apos;,2,3], [1,2,3], &apos;validate sample&apos;);
}
catch(err){
    //error due to mismatch schema
    console.log(err.message);
};
class A{};
let a = new A();
assert.beInstanceOf(a, A);
try{
    assert.beInstanceOf(&apos;1&apos;, A);
}
catch(err){
    console.log(err.message);
}
</code>
</code></pre><p><a href="./manual/./asset/examples/assert.babel.js">Run code</a></p></div>
        <a data-ice="link" href="manual/introduction.html#sub-packages"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
